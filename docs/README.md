# StocksTok - 株価スイングトレード分析ツール

## プロジェクト概要

StocksTokは、東証の株情報をスクリーニングし、スイングトレード（数日～2週間程度）に特化した買い時株を提示するPCアプリケーションです。

### 主要機能

- 東証全上場企業の株価分析
- スイングトレード向け10社のピックアップ
- 多角的な評価要素（財務、テクニカル、ニュース等）
- 0-100点の詳細評価システム
- 履歴保存とキャッシュ機能
- 将来的な機械学習対応

### 技術スタック

- **言語**: Python 3.11+
- **フレームワーク**: FastAPI + Streamlit
- **データベース**: SQLite
- **外部API**: 無料の株価・財務データAPI
- **実行環境**: Windows 11

## ドキュメント構成

```
docs/
├── README.md                    # このファイル
├── requirements/                # 要件定義
│   ├── functional.md           # 機能要件
│   ├── non-functional.md       # 非機能要件
│   └── constraints.md          # 制約事項
├── design/                     # 設計書
│   ├── architecture.md         # アーキテクチャ設計
│   ├── data-model.md           # データモデル設計
│   └── api-design.md           # API設計
├── development/                # 開発関連
│   ├── task-breakdown.md       # タスク分割
│   ├── implementation-plan.md  # 実装計画
│   └── coding-guidelines.md    # コーディング規約
└── deployment/                 # デプロイメント
    ├── setup.md               # セットアップ手順
    └── maintenance.md         # 運用・保守
```

## エージェント開発ガイド

### 開発開始前の準備

1. **要件確認**: `docs/requirements/` の全ドキュメントを確認
2. **設計理解**: `docs/design/` のアーキテクチャとデータモデルを理解
3. **開発計画**: `docs/development/task-breakdown.md` に従ってタスクを実行
4. **コーディング規約**: `docs/development/coding-guidelines.md` を遵守

### 推奨開発順序

#### Phase 1: 基盤構築 (TASK-001 ～ TASK-004)
1. プロジェクト初期化
2. データベース設計・実装
3. ログシステム実装
4. 設定管理システム

#### Phase 2: データ取得機能 (TASK-005 ～ TASK-009)
1. 外部API接続基盤
2. 株価データ取得
3. 財務データ取得
4. ニュースデータ取得
5. キャッシュシステム

#### Phase 3: 分析エンジン (TASK-010 ～ TASK-014)
1. ファンダメンタルズ分析
2. テクニカル分析
3. ニュース分析
4. 総合評価システム
5. 機械学習基盤

#### Phase 4: UI/UX実装 (TASK-015 ～ TASK-018)
1. FastAPI実装
2. Streamlit UI実装
3. データ可視化
4. レポート生成

#### Phase 5: 統合・テスト (TASK-019 ～ TASK-022)
1. システム統合
2. 単体テスト
3. 統合テスト
4. デバッグ・修正

#### Phase 6: 最適化・ドキュメント (TASK-023 ～ TASK-026)
1. パフォーマンス最適化
2. セキュリティ強化
3. ドキュメント作成
4. 最終テスト・リリース準備

### 重要な制約事項

- **無料ライブラリのみ使用**: 有償ライブラリやAPIは使用不可
- **Windows 11対応**: 他のOSでの動作は保証しない
- **ローカル環境**: クラウドサーバーは使用しない
- **個人利用**: 商用利用は想定していない

### データフロー

```
1. 企業リスト取得 → 2. 株価データ取得 → 3. 財務データ取得 → 4. ニュースデータ取得
    ↓
5. ファンダメンタルズ分析 → 6. テクニカル分析 → 7. ニュース分析
    ↓
8. 総合評価計算 → 9. ランキング生成 → 10. 結果保存・表示
```

### 評価システム

#### ファンダメンタルズ分析 (40%)
- 財務健全性 (25点)
- 収益性 (25点)
- 成長性 (25点)
- 配当政策 (25点)

#### テクニカル分析 (35%)
- 価格トレンド (30点)
- モメンタム (30点)
- ボラティリティ (20点)
- 出来高分析 (20点)

#### ニュース分析 (25%)
- 開示情報の重要性 (40点)
- ニュースの影響度 (30点)
- 業界動向との整合性 (30点)

### キャッシュ戦略

- **株価データ**: 1日間キャッシュ
- **財務データ**: 決算日までキャッシュ
- **ニュースデータ**: 1時間キャッシュ
- **分析結果**: 1日間キャッシュ

### パフォーマンス要件

- **初回実行**: 最大30分以内
- **2回目以降**: 最大5分以内
- **メモリ使用量**: 最大2GB
- **ディスク使用量**: 最大1GB

## セットアップ・運用

### クイックスタート

1. リポジトリをクローン
2. `docs/deployment/setup.md` の手順に従ってセットアップ
3. アプリケーションを起動

### 開発環境

詳細な開発環境構築手順は `docs/deployment/setup.md` を参照してください。

### 運用・保守

日常的な運用・保守手順は `docs/deployment/maintenance.md` を参照してください。

## 開発者向け情報

### アーキテクチャ概要

StocksTokは以下の4層アーキテクチャを採用しています：

1. **プレゼンテーション層**: Streamlit UI + FastAPI
2. **アプリケーション層**: ビジネスロジック
3. **ドメイン層**: 分析・評価ロジック
4. **インフラストラクチャ層**: データアクセス・外部API

### データベース設計

SQLiteデータベースを使用し、以下のテーブルで構成：

- `companies`: 企業情報
- `stock_prices`: 株価データ
- `financial_data`: 財務データ
- `news_data`: ニュースデータ
- `analysis_results`: 分析結果
- `cache_data`: キャッシュデータ
- `system_logs`: システムログ

### API設計

FastAPIを使用したRESTful APIを提供：

- `/api/v1/analyze`: 分析実行
- `/api/v1/results`: 結果取得
- `/api/v1/history`: 履歴取得
- `/api/v1/companies`: 企業情報
- `/api/v1/stock-prices`: 株価データ
- `/api/v1/financial`: 財務データ
- `/api/v1/news`: ニュースデータ

### テスト戦略

- **単体テスト**: 各モジュールの個別テスト
- **統合テスト**: モジュール間の連携テスト
- **システムテスト**: 全システムの動作テスト
- **パフォーマンステスト**: 要件満足の確認

### 品質管理

- **コードカバレッジ**: 80%以上
- **PEP 8準拠**: Pythonコーディング規約
- **型ヒント**: 全関数・メソッドに型ヒント
- **ドキュメント**: 全公開APIにドキュメント

## 将来拡張計画

### 機械学習機能

- 履歴データを活用した予測モデル
- 評価指標の自動最適化
- パフォーマンス分析と改善

### 他市場対応

- 米国市場（NYSE、NASDAQ）
- 欧州市場（LSE、Euronext）
- アジア市場（香港、シンガポール）

### 機能拡張

- ポートフォリオ管理機能
- リスク分析機能
- バックテスト機能
- リアルタイムアラート機能

## トラブルシューティング

### よくある問題

1. **Pythonが見つからない**: 環境変数PATHの確認
2. **依存関係エラー**: pipのアップグレードとキャッシュクリア
3. **ポート使用中**: 別ポートの使用またはプロセス終了
4. **データベースエラー**: データベースファイルの権限確認

### ログ確認

```bash
# ログファイルの確認
type logs\stocks_tok.log

# エラーログの確認
findstr "ERROR" logs\stocks_tok.log

# リアルタイムログ監視
Get-Content logs\stocks_tok.log -Wait
```

### サポート

問題が解決しない場合は、以下を確認してください：

1. `docs/deployment/setup.md` のトラブルシューティングセクション
2. `docs/deployment/maintenance.md` の障害対応セクション
3. ログファイルの詳細確認

## 開発フロー・運用方針（gitflow）

- 本プロジェクトは**gitflow**を基本としたブランチ運用を行います。
- `main` から `develop` を作成し、日常開発は `develop` 基軸で進めます。
- 新機能・修正は `feature/○○` `bugfix/○○` など日本語要旨付きブランチで作業し、必ずPR経由で `develop` へマージします。
- `develop` から `main` へのリリースもPR経由で行います。
- コミットメッセージは日本語で記述し、`feat:`, `fix:` などのタイプprefixを付与します。
- 想定外の事象が発生した場合は、エージェントが自力で解決策を検討しつつ、**必ずissueを立てて記録**します。
- GitHub Actions等の自動化は無料範囲で自由に設計・運用します。
- StocksTokリポジトリ外に影響を及ぼす操作は禁止し、開発・CI/CD・テスト等は必ず本リポジトリ内で完結させます。

詳細は `docs/development/coding-guidelines.md` も参照してください。

## ライセンス

このプロジェクトは無料で利用可能なライブラリのみを使用しています。

## 免責事項

このアプリケーションは投資助言を提供するものではありません。投資判断の最終責任はユーザーにあります。過去の実績は将来の結果を保証するものではありません。 